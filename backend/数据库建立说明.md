# 学习系统数据库建立说明

## 前置条件

1. **MySQL服务已安装并启动**
   - 确保MySQL服务正在运行
   - 可以通过 `net start mysql` 启动服务

2. **MySQL客户端工具可用**
   - 确保 `mysql` 命令可以在命令行中使用
   - 如果没有，请将MySQL的bin目录添加到系统PATH中

## 快速建立数据库

### 方法1：使用批处理文件（推荐）

1. 双击运行 `setup-database.bat`
2. 输入MySQL root用户密码
3. 等待脚本执行完成

### 方法2：手动执行SQL脚本

1. 打开命令行或MySQL Workbench
2. 以root用户身份连接MySQL
3. 执行 `setup-database.sql` 文件中的内容

## 数据库配置信息

- **数据库名**: `study_system`
- **用户名**: `cetc38`
- **密码**: `1234`
- **端口**: `3306`
- **字符集**: `utf8mb4`
- **排序规则**: `utf8mb4_unicode_ci`

## 表结构

### students表（学生表）

| 字段名 | 类型 | 说明 | 约束 |
|--------|------|------|------|
| id | BIGINT | 主键ID | 自增，主键 |
| username | VARCHAR(20) | 用户名 | 非空，唯一 |
| password | VARCHAR(100) | 密码 | 非空 |
| real_name | VARCHAR(50) | 真实姓名 | 非空 |
| email | VARCHAR(100) | 邮箱 | 可选 |
| phone | VARCHAR(20) | 手机号 | 可选 |
| student_number | VARCHAR(20) | 学号 | 唯一 |
| status | ENUM | 账户状态 | 默认ACTIVE |
| login_attempts | INT | 登录失败次数 | 默认0 |
| locked_until | DATETIME | 锁定截止时间 | 可选 |
| last_login_time | DATETIME | 最后登录时间 | 可选 |
| created_time | DATETIME | 创建时间 | 自动设置 |
| updated_time | DATETIME | 更新时间 | 自动更新 |

## 测试数据

系统预置了3个测试账号：

| 用户名 | 密码 | 真实姓名 | 学号 |
|--------|------|----------|------|
| student001 | 123456 | 张三 | 2024001 |
| student002 | 123456 | 李四 | 2024002 |
| student003 | 123456 | 王五 | 2024003 |

## 验证数据库

执行以下SQL命令验证数据库是否建立成功：

```sql
-- 查看数据库
SHOW DATABASES LIKE 'study_system';

-- 使用数据库
USE study_system;

-- 查看表
SHOW TABLES;

-- 查看表结构
DESCRIBE students;

-- 查看测试数据
SELECT id, username, real_name, email, student_number, status, created_time FROM students;
```

## 常见问题

### 1. 连接被拒绝
- 检查MySQL服务是否启动
- 确认端口3306是否被占用
- 检查防火墙设置

### 2. 权限不足
- 确保使用root用户执行脚本
- 检查用户权限设置

### 3. 字符集问题
- 确保MySQL支持utf8mb4字符集
- 检查配置文件中的字符集设置

## 启动应用

数据库建立完成后，可以启动Spring Boot应用：

```bash
mvn spring-boot:run
```

应用将在 `http://localhost:8080` 启动，并自动连接到数据库。

## 联系支持

如果遇到问题，请检查：
1. MySQL服务状态
2. 网络连接
3. 用户权限
4. 配置文件设置
